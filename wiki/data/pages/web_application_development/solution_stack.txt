====== Solution Stack ======

Solution stack are a set of software solutions that are needed to deliver a fully functional solution. For a web application the stack requires an operating system, a web server, a database, and programming language. For the development of the web application, you require an integrated development environment (IDE). Understanding how these solution stacks are set up is important part of web application development. This section provides an introduction to the various stacks we will use, how to use them and how to install them on your computer.
===== AMP =====
=== What is AMP ===

AMP in fact provides bundled software, namely **A**pache, **M**ySQL, **P**HP (hence AMP), that are used to run dynamic Web sites or servers. Strictly speaking, this is all that is required to run and serve a website either locally or on the internet. For the purposes of this course, we have already setup WAMP on our server for each group of students to use for their web application development project.


=== Why AMP ===
As you would have read previously in [[Web Application Development:Vision and Plan]], we need certain Standards and technologies to get host a web server to deploy a web application. During the initial stages such as development, we do not want to worry about the server-side of things. Instead we want an available and easy to use test lab to prototype our running codes during developmental stages.

AMP provides a one-stop shop for easily setting up a functional webserver. It's key feature is that it offers an easy to install, configure and use package of softwares without requiring expert knowledge in either of the individual components.

=== How to install AMP ===
**WAMP (Windows AMP)**

WAMP can be downloaded from its official website [[http://www.wampserver.com/en/|here]]. Installation is quite straight forward.


**LAMP (Linux AMP)**

Some links to install LAMP on various Linux Distros are:

[[https://help.ubuntu.com/community/ApacheMySQLPHP|Install a LAMP server on Ubuntu Linux]]

[[http://wiki.debian.org/LaMp|Install a LAMP server on Debian GNU/Linux]]

[[http://en.opensuse.org/SDB:Linux_Apache_MySQL_PHP|Install a LAMP server on SUSE Linux]]

[[http://fedorasolved.org/server-solutions/lamp-stack|Install a LAMP server on Fedora Linux]]

[[http://jesseforrest.name/setup-a-production-centos-lamp-web-server/212|Install a LAMP server on CentOS Linux]]


**MAMP (MAC AMP)**

You can download a free version of MAMP [[http://www.mamp.info/en/index.html|here]] and further documentation can be found [[http://documentation.mamp.info/en|here]]


=== How to use AMP ===
Once you have setup your flavour of AMP, all you need to do is start the server. Please refer to documentation of the package you installed on how to start the webserver. This is usually quite straightforward, although you may sometimes encounter some difficulty. If that is the case, it may be that a 3rd party software is conflicting with AMP ports. A common example is Skype which uses port 22 and conflicts with WAMP. We therefore recommend exiting skype prior to starting WAMP. Feel free to browse through the various AMP forums available online for more resources and troubleshooting.

===== FTP =====

=== What is FTP ===
File Transfer Protocol, basic definition, Link to wiki

=== Why FTP ===
Current Standard for uploading files to web server (what else? research)

=== How to use FTP ===
Firefox plugin (fireftp)
Other plugins (Chrome equivalent?)
Standalone software?
Accessible through windows (inbuilt protocol from win xx?)
Other systems Mac/Linux
===== Understanding Absolute and Relative Paths =====

[Research what is] - definition
[Research relevance] - why

===== PHPMyAdmin =====

=== What is PHPMyAdmin ===
Basic definition, link to wiki


=== Why PHPMyAdmin ===
Ease of use/understanding/admin
Comes with AMP packages
What else (i.e. compare with alternatives?)

=== How to install and use PHPMyAdmin ===
Comes with AMP Packages
how to use
===== Notepad++ =====

If you have had prior programming experience, you would have been acquainted with Notepad or Dreamweaver. These two software stand at the opposite extremes of code editors. Notepad is one of the most simplest no frills text editor in existence. On the other hand Dreamweaver is one of the most complex and full fledged IDE for web code editing. For Polycademy, we recommend using [[http://notepad-plus-plus.org/|Notepad++]], this is a lightweight (super fast) code editor that has just enough features to be usable for complex applications. It has numerous plugins to make it even more flexible. It is free to download at their website: http://notepad-plus-plus.org/

It however has not been ported to Mac or Linux. There are free alternatives available such as [[http://www.geany.org/|Geany]] for Linux or [[http://www.barebones.com/products/textwrangler/|Text Wrangler]] for Mac.

**Using Notepad++**

Using the Notepad++ is simple. Just download the latest .exe installer and follow the prompts to finish the installation. Once installed, open it up. It should look similar to this:

{{ ::notepad_-screenshot.jpg |}}

It has some important features to take care of:

  - The text encoding is currently set at ANSI (American National Standards Institute). Most files you encounter will be encoded at ANSI. Text encoding is essentially the way computers convert a human language character such as an English letter or Chinese character into set of numbers or bits so it can be transmitted electronically. ANSI is outdated due to the plethora of languages and symbols people use to express themselves on the internet, using it can result in all sorts of funny text errors. Therefore we need to change this into [[wp>UTF-8]] (Unicode Transformation Format), we can do this in the settings. Foreign languages will need to use other UTF formats. You can learn more about it here: http://code.alexreisner.com/articles/character-encoding.html
  - This shows the document format, this is only relevant to line spacing. Keep it at Dos/Windows, as this can be interpreted on all platforms.
  - To change the text encoding, we have to go into settings. Click on the "New Document/Default Directory" tab, then in the "Encoding" options select "UTF-8 without BOM" and tick "Apply to opened ANSI files". The BOM as in Byte Order Mark designates the file as UTF-8, however we don't need this and some applications may choke on the designation. We want to apply to opened ANSI files because that brings no harm to ANSI files that you download from the internet and makes those files more flexible.
  - Language settings allow you to set how you want Notepad++ to interpret/syntax highlight the code you are writing. It is not necessary to set it up manually as when you save the file extension such as php or html, it will automatically detect it.

Notepad++ has many features in which it would take an overly verbose manual to talk about it all, so just begin using it throughout the course and these features will eventually become evident.

Note that the UTF-8 issue will come out later in the course with regards to text transmission.

===== Firebug =====

Usage of firebug is very important - EXPAND
===== GitHub =====

[[wp>Github]] is web service that allows developers to host their source code online using the Git [[wp>revision control system]]. This is essentially an ecosystem that allows us to collaboratively work on projects, while maintaining historical records of various changes in the code base. Revision control systems such as Git are industry practice, so learning how to use it will be very helpful. In order to utilise the Polycademy's account on Github, all our projects have to be open source while it is being developed as part of Polycademy's courses. We will be using Github and its associated software in class and out of class, there we have to learn how to install it on your local computer.

**Installation**

To start, go to Github's main website and signup to a free open source account. Once signed up, you'll receive a validate email message in your inbox, you can validate it later. Tell your teacher your username and we'll add you as a member of the Student Group at the Polycademy. We'll be creating repositories (code projects) for each team. By being part of the Polycademy organisation, this allows you to view and commit to your team's repository.

When we are in class, students will be organised into teams of 4 - 5. Each team works on a particular project. The project's name will be the repository's name. Tell your teacher your team/project's name, and we'll create the repository as part of Polycademy. Then we'll assign the team members to the repository.

To be able to use Github locally, we'll use Github's desktop GUI. There are currently two versions, one for [[http://mac.github.com/|Mac]] and one for [[http://windows.github.com/|Windows]]. These two software work roughly the same, the following instructions will apply to the Windows version.

The Github installation installs a "Git Shell" and a "Github". Git is usually commanded with the command line, however for the sake of simplicity we'll focus on the GUI version which is just Github. Follow the prompts until you reach the main screen.

{{ :web_application_development:github_for_windows-screenshot.jpg |}}

**Setting up the Environment**

In web application development, code is hosted on servers. There will usually be two servers used for two different purposes. The first is your local development server, this is usually your own computer. The second is the production server, this will be the server that runs the application for your external users. For our case, Github will act as an intermediary development server between the your local development server and the production server. This is to allow a team of developers to work on a single project while still maintaining their own local file integrity. However we want to be able to synchronise the files between development server and Github so we don't have the manually upload files or code changes (which are known as "commits" in Git).

{{ :web_application_development:github_development_workflow.png?600 |}}

In order to this we need to first install AMP. Refer to the top to see how this is done. After installing AMP, the directory in which you execute your code should be either called "www" or "public_html". All the code that we write will be committed to this folder. In the main screen of Github's GUI select tools, then options. This will get you into the options menu. On the top right there should be a section titled "default storage directory". Make the following file path to match the file path that gets you into your "www" or "public_html" directory. You can click on the "..." button to navigate there. If you are on Windows, it should be "C:\wamp\www\". Note that you can if you want create a subdirectory called "polycademy_projects" inside that folder so you can separate your local projects from your Polycademy projects. Once this is done, click "update" on the bottom.

Once this is done, go back to the main screen of Github GUI. At this point you should not have any repositories in your local or personal Github account. However you should have been added to this Polycademy organisation, so you should see a few Polycademy repositories. The team that you are working with will all see the same repositories. Your team name will be entered as your project. To begin using your repository, you need to clone it to your own local development server. Hover your mouse over the repository's name and click "CLONE". The program will download the repository to your computer.

If you now open your "www" or "public_html" directory, you should see the project there. The code in that project folder is tracked by Github and you can see the status of any changes to it in your local repository section in the Github GUI.

**Using Branches**

Each repository will have multiple branches, branches are basically duplicates of the code base but with specific changes in them. This allows teams to separate what they consider production ready code to developing code to specific feature sets. Right now your repository only has one branch and this is the master branch. We need to create a develop branch and feature branches for your specific part of the project. To do this, go to the local repository list, open the repository in the GUI, then on the top middle there is a tab called "master". Click on it and a drop down menu should appear. You can create or change branches in this menu or you can go into the advanced "manage" panel. By typing a new branch into the FILTER OR CREATE NEW input you can then create the "develop" branch.

{{ :web_application_development:create_branch_github.jpg |}}

The develop branch is where the most of the work will be merged between all the developers in the team. The master branch will be the production ready code. We will be creating new branches for whenever we need to create a feature set. Branches allow a project to be worked on in a distributed manner and we merge back the branches to develop then master when they are ready to run. Note that as you create branches in the Github GUI, they won't be published to the Github server. You need to click "publish" for that to happen. Branches are created on top of existing branches, so they can grow from a base branch. The develop branch should "branch off" the master branch, and the further feature set branches should "branch off" the develop branch. You will need to go into the "manage" panel in the branch menu to do that. (It's also used for merges) Now that you have multiple branches created, you can select your current branch your Github will track. This means that any changes to your code in your filesystem will only be recorded and committed into the currently selected branch. Make sure to keep track of this as you don't want to commit untested code to your master branch.

**Reverting Commits**

But if you do commit a bad change, we can revert code easily. This is one of the greatest advantages of using a revision control system. To use this we must first understand how code changes are tracked by the Git software. Let's use the current develop branch that we just created. Assuming it is currently unpublished, then none of the changes will be committed to the Github server. Go into your project on your file system and create a text file with any code. Save it and then check the Github GUI. It should show that there are some "uncommitted changes". If you click on that it will show the list of uncommitted changes. It should show that there is a new text file and the contents of that text file. If you go back and change the file again, you will see the changes reflect in the uncommitted changes. Let's go ahead and commit those changes. Remember to check that your current branch is still on the develop branch that is unpublished. You should write a commit message describing what the point of the code change is for.

{{ :web_application_development:uncommitted_changes.jpg |}}

You will now see that there are no more uncommitted changes, but there is new unsynced commit. Clicking on the right will show you the recent committed code change. Let's say you didn't like that commit. Then right now you can either revert commit via Github GUI, or you can go into the file/folder and remove offending code/file via your explorer. It is better to linearly progress through your code (to get an accurate history) so try to remove it via your explorer (and give a reason) rather than through Github. Specific commits throughout your history can get reverted as well, so it doesn't have to be in order, however this may result in merge conflicts with other files so it's best to avoid trying that function.

It is possible to rollback your commit. This means to rollback your unsynced commit to an uncommitted commit. All of these features are powerful however it is very easy to get into merge conflicts with historical revisionism. It also confuses your team members if you mess with public history. So it's best to just linearly progress through your coding and use the history not as administrative tool but as a historical tracking tool. If you do get into a grandfather paradox where you deleted the file not in sequence and did some reversions then some other changes, then you can resolve this by rolling back to the committed commit that caused all the problems.

It is also possible to commit multiple code changes in multiple files at the same time. For the purposes of early development it is better to commit once per code change per page. Although you may get a messy unsynced commit history, you get a more precise history.

Now after you have committed all your code and you have created a working feature, it is time to sync it with Github server. Since our branch is currently unpublished, we cannot sync it. So first click publish and let Github GUI upload your develop branch to your project's repository. Once this is done, its status should show "in sync". Congratulations on committing then syncing to your first code change on Github! After the branch is published when you have committed commits, then click sync to sync them to the remote branch.

**The Merge Workflow**

Now we have two branches, develop and master. Currently the develop branch is more up to date than the master branch because we made some changes to the develop branch which was branching off master. If you switch your branch to master, you will see that no changes have taken place. If we consider that the develop branch is ready to be hosted for all of the world to see, we can then merge the code base into master. But hold your horses there are checks to do before doing this since we want to solve any possible merge conflicts and there could be new commits made to the develop branch on Github by other members of your team.

Firstly create a new branch off develop and call it your own name's branch. This branch can be published as it allows you to use it over the internet. This is the branch you will use for your own development before pushing to the remote develop branch. Also note that any changes made to your code on your local computer has to be committed then synced before it is represented in the remote develop branch.

Now let's assume that another team member also creates their own branch and soon you both are working on the same file. You enter some code that conflicts with your team mate's code. Your team mate commits their code change, then merges and syncs the develop branch. Essentially your team mat has submitted code that conflicts with your code before you. Now clear communication at this point should prevent any problems from arising. But let's further assume that your team mate did not inform you that they have submitted new code to the same file you're editing. Now when you try to merge with the develop branch, you will meet a merge conflict. Remember to merge the remote branch into your local branch first as you should always be keeping your local branch copy as up to date as possible.

No need to panic, it is a simple thing to sort out. Just click Abort Merge for now. Go to the offending file that is in conflict. There may be multiple files and a quick way to find out is to go to back to your Github screen for your current branch, it should show uncommited changes. Do not commit these changes, Github just put in markers in your files to indicate the conflicts. Go to these specific files in your filesystem and you should see:

<code>
<<<<<<< HEAD
Code that is in your current file
=======
Code that is in the conflicting file in the remote server
>>>>>>> origin/develop
</code>

This allows you to choose which of these codes you want to keep. If you want to keep your team mates code, that is the code in the conflicting file in the remote server, then delete everything in the above except their code. Commit the change then try merging develop into your local branch. Remember to merge back into the develop branch to push your updates to the develop branch.

If you want to keep your code, then delete everything in the above except your original code. If you go back to Github there should be no more uncommitted changes. You have not yet resolved your merge conflict, as far as Github is concerned, nothing has changed. Go back to the branch manage panel, and this time change the merge order. You can do this by clicking on the arrow symbol. This time you are merging local branch into develop branch. This time a merge conflict will appear again. Abort merge, then check the file. The file should show a similar code to the above but with the codes flipped over. Now just delete everything except your code (the code you keep should always be the one on the bottom), then commit and merge and merge back.

If you want to change and merge with a new code, then first do one of the above, then update it in your local branch and push the update to the develop branch.

Some tips to remember:

  - Remote -> Local merge for keeping remote code
  - Local -> Remote merge for keeping local code.
  - Merge forwards then merge backwards, only the receiving branch gets updated. Merges are not double way.
  - Do not commit merge conflict edits done automatically by Github after a merge conflict.
  - If you neither want local or remote, then keep one of them first before updating to a new one.
  - Your commits should only contain one file, not multiple files. It makes it easier to deal with merge conflicts this way.
  - Don't forget to sync the develop branch after you merged it. Nothing is represented on the remote Github until you do.
  - If you screw up, just rollback on the offending commit.
  - DO communicate with your team and have proper division of labour so you can avoid merge conflicts
  - Always commit everything before you merge. Sync at the very end.
  - Read this http://sethrobertson.github.com/GitBestPractices/ for more information on Git, it is really powerful tool!